{"version":2,"kind":"Notebook","sha256":"f1091fc38112badb283e30cfb2b1ced87b9f8428586ee0e6e7d77527bfbc5d2b","slug":"foundations.pyart.pyart-corrections","location":"/foundations/pyart/pyart-corrections.ipynb","dependencies":[],"frontmatter":{"title":"Py-ART Corrections","content_includes_title":true,"kernelspec":{"name":"python3","display_name":"arm-summer-school-2025-dev","language":"python"},"authors":[{"nameParsed":{"literal":"Max Grover","given":"Max","family":"Grover"},"name":"Max Grover","orcid":"0000-0002-0370-8974","github":"mgrover1","id":"contributors-myst-generated-uid-0"}],"open_access":true,"license":{"content":{"id":"CC-BY-4.0","url":"https://creativecommons.org/licenses/by/4.0/","name":"Creative Commons Attribution 4.0 International","free":true,"CC":true},"code":{"id":"Apache-2.0","url":"https://opensource.org/licenses/Apache-2.0","name":"Apache License 2.0","free":true,"osi":true}},"github":"https://github.com/mgrover1/arm-field-site-cookbook","copyright":"2025","affiliations":[{"id":"UAlbany","name":"University at Albany (SUNY)","department":"Atmospheric and Environmental Sciences","url":"https://www.albany.edu/daes"},{"id":"CISL","name":"NSF National Center for Atmospheric Research","department":"Computational and Information Systems Lab","url":"https://www.cisl.ucar.edu"},{"id":"Unidata","name":"NSF Unidata","url":"https://www.unidata.ucar.edu"},{"id":"Argonne","name":"Argonne National Laboratory","department":"Environmental Science Division","url":"https://www.anl.gov/evs"},{"id":"CarbonPlan","name":"CarbonPlan","url":"https://carbonplan.org"},{"id":"NVIDIA","name":"NVIDIA Corporation","url":"https://www.nvidia.com/"}],"numbering":{"title":{"offset":2}},"source_url":"https://github.com/mgrover1/arm-field-site-cookbook/blob/main/foundations/pyart/pyart-corrections.ipynb","edit_url":"https://github.com/mgrover1/arm-field-site-cookbook/edit/main/foundations/pyart/pyart-corrections.ipynb","thumbnail":"/arm-field-site-cookbook/build/arm_logo-664340d66038903b48261c0523fb2716.png","exports":[{"format":"ipynb","filename":"pyart-corrections.ipynb","url":"/arm-field-site-cookbook/build/pyart-corrections-458730777c7fe63e575db9cb4aedbe6f.ipynb"}]},"widgets":{},"mdast":{"type":"root","children":[{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"image","url":"/arm-field-site-cookbook/build/arm_logo-664340d66038903b48261c0523fb2716.png","alt":"ARM Logo","width":500,"key":"GHCsNqoATP","urlSource":"../../images/arm_logo.png"}],"key":"BTAfaQDtHm"}],"key":"ENYWrkPzzL"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":1,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Py-ART Corrections","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ikmRpfJ3CR"}],"identifier":"py-art-corrections","label":"Py-ART Corrections","html_id":"py-art-corrections","implicit":true,"key":"IM1e3CMKlh"},{"type":"thematicBreak","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"pDLBQ6e2R5"}],"key":"H7jTYEGhBS"},{"type":"block","kind":"notebook-content","data":{"tags":[]},"children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Overview","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jkGGKeWkDb"}],"identifier":"overview","label":"Overview","html_id":"overview","implicit":true,"key":"coYvMPuZRE"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"Within this notebook, we will cover:","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"kTpPyqY6Qm"}],"key":"PlbUknzFjj"},{"type":"list","ordered":true,"start":1,"spread":false,"position":{"start":{"line":5,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Intro to radar aliasing.","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"iLTVxvJDZ8"}],"key":"XBV4IdTGsv"}],"key":"XfGqYDisZG"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Calculation of velocity texture using Py-ART","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"f8iyvGsZCj"}],"key":"XEslGLeOEh"}],"key":"V9iLmTrFdi"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Dealiasing the velocity field","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"zgmiEEBX0U"}],"key":"r6l4PH9SSc"}],"key":"syZaRqZm93"}],"key":"LE5L616U6A"},{"type":"heading","depth":2,"position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":9,"column":1},"end":{"line":9,"column":1}},"key":"FpCfmxz8EL"}],"identifier":"prerequisites","label":"Prerequisites","html_id":"prerequisites","implicit":true,"key":"sakoQRFR1C"},{"type":"table","position":{"start":{"line":10,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"tableRow","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"tableCell","header":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Concepts","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"Rq5yScDZqy"}],"key":"Y7O2dD4zFu"},{"type":"tableCell","header":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Importance","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"iRg2ApOzqv"}],"key":"CaZdyBsRHa"},{"type":"tableCell","header":true,"position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"children":[{"type":"text","value":"Notes","position":{"start":{"line":10,"column":1},"end":{"line":10,"column":1}},"key":"N6C30mVFEh"}],"key":"l04df2WT0f"}],"key":"SIBtaBBERm"},{"type":"tableRow","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"link","url":"/foundations/pyart/pyart-basics","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Py-ART Basics","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"Pwd99orIl3"}],"urlSource":"pyart-basics","dataUrl":"/foundations.pyart.pyart-basics.json","internal":true,"protocol":"file","key":"z4lSpAw8NS"}],"key":"t9ZHgB5BBr"},{"type":"tableCell","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"XUrKT1fAbS"}],"key":"EGSjPa4gN7"},{"type":"tableCell","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"children":[{"type":"text","value":"Basic features","position":{"start":{"line":12,"column":1},"end":{"line":12,"column":1}},"key":"rVC6b0dsic"}],"key":"NdqlKrmzLX"}],"key":"wtZnWiKF9X"},{"type":"tableRow","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"link","url":"https://projectpythia.org/radar-cookbook/README.html","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Weather Radar Basics","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"TTqQtdyny3"}],"urlSource":"https://projectpythia.org/radar-cookbook/README.html","key":"fY0Im9Flqd"}],"key":"hD4rR6zo0C"},{"type":"tableCell","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"fHMFAu1fkF"}],"key":"WvQae1AJ4X"},{"type":"tableCell","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"children":[{"type":"text","value":"Background Information","position":{"start":{"line":13,"column":1},"end":{"line":13,"column":1}},"key":"PIK4iQewMI"}],"key":"xKGSaAfyYC"}],"key":"RkdAkQaedO"},{"type":"tableRow","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"link","url":"https://foundations.projectpythia.org/core/matplotlib/matplotlib-basics.html","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Matplotlib Basics","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"ZZAvCD1uF8"}],"urlSource":"https://foundations.projectpythia.org/core/matplotlib/matplotlib-basics.html","key":"GyLzrNgeL6"}],"key":"ZogP6z9NcA"},{"type":"tableCell","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"nTgXJIBPj5"}],"key":"btCFvl5gpi"},{"type":"tableCell","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"children":[{"type":"text","value":"Basic plotting","position":{"start":{"line":14,"column":1},"end":{"line":14,"column":1}},"key":"ryHfKlCIZX"}],"key":"JWY3jBXNxe"}],"key":"vZf55vbDqp"},{"type":"tableRow","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"link","url":"https://foundations.projectpythia.org/core/numpy/numpy-basics.html","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"NumPy Basics","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"KhBmlfqOPF"}],"urlSource":"https://foundations.projectpythia.org/core/numpy/numpy-basics.html","key":"F5P2joKtBC"}],"key":"gIANrKO6Cd"},{"type":"tableCell","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"ltR2A7o7qh"}],"key":"BANuo3RD12"},{"type":"tableCell","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"children":[{"type":"text","value":"Basic arrays","position":{"start":{"line":15,"column":1},"end":{"line":15,"column":1}},"key":"esXIRQIAsi"}],"key":"SFdleW4aot"}],"key":"vvIdiRFZM8"},{"type":"tableRow","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"tableCell","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"link","url":"https://foundations.projectpythia.org/core/xarray.html","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Xarray Basics","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"CSNCZuvn9w"}],"urlSource":"https://foundations.projectpythia.org/core/xarray.html","key":"cv2RO4O9Yk"}],"key":"FrfClAIJ9h"},{"type":"tableCell","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Helpful","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"hVaNwtgK1E"}],"key":"AhFMmt3LGV"},{"type":"tableCell","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"children":[{"type":"text","value":"Multi-dimensional arrays","position":{"start":{"line":16,"column":1},"end":{"line":16,"column":1}},"key":"C1EJUvbpBQ"}],"key":"ho1H4dvUUc"}],"key":"ddLWcqr5Wu"}],"key":"hvpaaMrxup"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"paragraph","children":[{"type":"strong","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"children":[{"type":"text","value":"Time to learn","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"qicjlu4f3d"}],"key":"jKnquA1BWq"},{"type":"text","value":": 15 minutes","position":{"start":{"line":18,"column":1},"end":{"line":18,"column":1}},"key":"bxxc5yIhLn"}],"key":"Din6LQ3RPa"}],"key":"qz3JWfe9a2"}],"key":"qcCrYo3xOY"},{"type":"thematicBreak","position":{"start":{"line":19,"column":1},"end":{"line":19,"column":1}},"key":"SEWE65uILC"}],"visibility":"show","key":"O6FIJ2MWsm"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Imports","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"oDBzcN4BuH"}],"identifier":"imports","label":"Imports","html_id":"imports","implicit":true,"key":"xjQ92Tqid7"}],"key":"ikHYip3zac"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"import os\nimport warnings\n\nimport cartopy.crs as ccrs\nimport matplotlib.pyplot as plt\nimport numpy as np\nimport xarray as xr\n\nimport pyart\nfrom pyart.testing import get_test_data\nimport xradar as xd\n\nwarnings.filterwarnings('ignore')","visibility":"show","key":"CoFAD0DXTo"},{"type":"output","id":"bMWCvH288gaRSWmBPobi-","data":[{"output_type":"stream","name":"stdout","text":"\n## You are using the Python ARM Radar Toolkit (Py-ART), an open source\n## library for working with weather radar data. Py-ART is partly\n## supported by the U.S. Department of Energy as part of the Atmospheric\n## Radiation Measurement (ARM) Climate Research Facility, an Office of\n## Science user facility.\n##\n## If you use this software to prepare a publication, please cite:\n##\n##     JJ Helmus and SM Collis, JORS 2016, doi: 10.5334/jors.119\n\n"}],"visibility":"show","key":"n8nxsQmkHD"}],"visibility":"show","key":"oW2ZjY9neE"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Read in the Data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"lQAu9Sgftx"}],"identifier":"read-in-the-data","label":"Read in the Data","html_id":"read-in-the-data","implicit":true,"key":"ixHrsR5Gf7"}],"key":"feoyUV65Sr"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Read in a sample file from the University of Alabama Huntsville (UAH) ARMOR Site","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"SVcnRjeehR"}],"identifier":"read-in-a-sample-file-from-the-university-of-alabama-huntsville-uah-armor-site","label":"Read in a sample file from the University of Alabama Huntsville (UAH) ARMOR Site","html_id":"read-in-a-sample-file-from-the-university-of-alabama-huntsville-uah-armor-site","implicit":true,"key":"qVmU7Nhf01"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Our data is formatted as an ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"YChwuajuG5"},{"type":"emphasis","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"inlineCode","value":"sigmet","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"S0b2yyiN1j"}],"key":"pfo2bWjTet"},{"type":"text","value":" file, which is a vendor-specific format, produced by Vaisala radars.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"DjtA0ErVpC"}],"key":"GGDzBfja5U"},{"type":"paragraph","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Inspect the ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"VcB7uQQqy4"},{"type":"inlineCode","value":"xradar.io","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"BGZcHtXXvH"},{"type":"text","value":" documentation for the ","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"pKbGZUOqfg"},{"type":"emphasis","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"inlineCode","value":"iris/sigment","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"MiQ4ZY1WSQ"}],"key":"WKT7B6ko0o"},{"type":"text","value":" reader for this specific format","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"xQmtNTz1Vk"}],"key":"oH3zesxFOb"}],"key":"xAgzEQpCDi"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"file = \"../../data/uah-armor/RAW_NA_000_125_20080411182229\"","visibility":"show","key":"l6HIzDAeUN"},{"type":"output","id":"v41BXa0B7t2fSuiiT9GF_","data":[],"visibility":"show","key":"V5avLdVigI"}],"visibility":"show","key":"ItCLYEmiKV"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"radar = pyart.io.read(file)","key":"mRxJSDO9HK"},{"type":"output","id":"K_78pfrnwMnmWa98BiIc-","data":[{"output_type":"error","traceback":"\u001b[31m---------------------------------------------------------------------------\u001b[39m\n\u001b[31mFileNotFoundError\u001b[39m                         Traceback (most recent call last)\n\u001b[36mCell\u001b[39m\u001b[36m \u001b[39m\u001b[32mIn[3]\u001b[39m\u001b[32m, line 1\u001b[39m\n\u001b[32m----> \u001b[39m\u001b[32m1\u001b[39m radar = \u001b[43mpyart\u001b[49m\u001b[43m.\u001b[49m\u001b[43mio\u001b[49m\u001b[43m.\u001b[49m\u001b[43mread\u001b[49m\u001b[43m(\u001b[49m\u001b[43mfile\u001b[49m\u001b[43m)\u001b[49m\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/arm-field-site-cookbook-dev/lib/python3.11/site-packages/pyart/io/auto_read.py:74\u001b[39m, in \u001b[36mread\u001b[39m\u001b[34m(filename, use_rsl, **kwargs)\u001b[39m\n\u001b[32m     22\u001b[39m \u001b[38;5;28;01mdef\u001b[39;00m\u001b[38;5;250m \u001b[39m\u001b[34mread\u001b[39m(filename, use_rsl=\u001b[38;5;28;01mFalse\u001b[39;00m, **kwargs):\n\u001b[32m     23\u001b[39m \u001b[38;5;250m    \u001b[39m\u001b[33;03m\"\"\"\u001b[39;00m\n\u001b[32m     24\u001b[39m \u001b[33;03m    Read a radar file and return a radar object.\u001b[39;00m\n\u001b[32m     25\u001b[39m \n\u001b[32m   (...)\u001b[39m\u001b[32m     72\u001b[39m \n\u001b[32m     73\u001b[39m \u001b[33;03m    \"\"\"\u001b[39;00m\n\u001b[32m---> \u001b[39m\u001b[32m74\u001b[39m     filetype = \u001b[43mdetermine_filetype\u001b[49m\u001b[43m(\u001b[49m\u001b[43mfilename\u001b[49m\u001b[43m)\u001b[49m\n\u001b[32m     76\u001b[39m     \u001b[38;5;66;03m# Bzip, uncompress and see if we can determine the type\u001b[39;00m\n\u001b[32m     77\u001b[39m     \u001b[38;5;28;01mif\u001b[39;00m filetype == \u001b[33m\"\u001b[39m\u001b[33mBZ2\u001b[39m\u001b[33m\"\u001b[39m:\n\n\u001b[36mFile \u001b[39m\u001b[32m~/micromamba/envs/arm-field-site-cookbook-dev/lib/python3.11/site-packages/pyart/io/auto_read.py:182\u001b[39m, in \u001b[36mdetermine_filetype\u001b[39m\u001b[34m(filename)\u001b[39m\n\u001b[32m    172\u001b[39m \u001b[38;5;66;03m# TODO\u001b[39;00m\n\u001b[32m    173\u001b[39m \u001b[38;5;66;03m# detect the following formats, those supported by RSL\u001b[39;00m\n\u001b[32m    174\u001b[39m \u001b[38;5;66;03m# 'RADTEC', the SPANDAR radar at Wallops Island, VA\u001b[39;00m\n\u001b[32m   (...)\u001b[39m\u001b[32m    179\u001b[39m \n\u001b[32m    180\u001b[39m \u001b[38;5;66;03m# read the first 12 bytes from the file\u001b[39;00m\n\u001b[32m    181\u001b[39m \u001b[38;5;28;01mtry\u001b[39;00m:\n\u001b[32m--> \u001b[39m\u001b[32m182\u001b[39m     f = \u001b[38;5;28;43mopen\u001b[39;49m\u001b[43m(\u001b[49m\u001b[43mfilename\u001b[49m\u001b[43m,\u001b[49m\u001b[43m \u001b[49m\u001b[33;43m\"\u001b[39;49m\u001b[33;43mrb\u001b[39;49m\u001b[33;43m\"\u001b[39;49m\u001b[43m)\u001b[49m\n\u001b[32m    183\u001b[39m     begin = f.read(\u001b[32m12\u001b[39m)\n\u001b[32m    184\u001b[39m     f.close()\n\n\u001b[31mFileNotFoundError\u001b[39m: [Errno 2] No such file or directory: '../../data/uah-armor/RAW_NA_000_125_20080411182229'","ename":"FileNotFoundError","evalue":"[Errno 2] No such file or directory: '../../data/uah-armor/RAW_NA_000_125_20080411182229'"}],"key":"mbFgCv2dI1"}],"key":"VlxuCAyKhG"},{"type":"block","kind":"notebook-code","children":[{"type":"code","lang":"python","executable":true,"value":"radar.fields","key":"r3kPKfOpce"},{"type":"output","id":"XH2dq6OGViVKmv8QbgDw9","data":[],"key":"vzy92SzbnO"}],"key":"ZWKjnNQMeB"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot a quick-look of reflectivity and velocity","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xL5h2HsJ2e"}],"identifier":"plot-a-quick-look-of-reflectivity-and-velocity","label":"Plot a quick-look of reflectivity and velocity","html_id":"plot-a-quick-look-of-reflectivity-and-velocity","implicit":true,"key":"kj2gQvygv5"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"We can start by taking a quick look at the reflectivity and velocity fields. Notice how the velocity field is ","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"hUkP6ugwKs"},{"type":"strong","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"rather messy","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"pRrniDZ79B"}],"key":"vrnHOtORxA"},{"type":"text","value":", indicated by the speckles and high/low values directly next to each other","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"Czg0xl8MkZ"}],"key":"lJ17VJbizh"}],"key":"q6kbe0x73V"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"fig = plt.figure(figsize=[8, 10])\nax = plt.subplot(211, projection=ccrs.PlateCarree())\ndisplay = pyart.graph.RadarMapDisplay(radar)\ndisplay.plot_ppi_map('reflectivity',\n                     ax=ax,\n                     sweep=0,\n                     resolution='50m',\n                     vmin=0,\n                     vmax=60, \n                     projection=ccrs.PlateCarree(),\n                     cmap='HomeyerRainbow')\n\nax2 = plt.subplot(2,1,2,projection=ccrs.PlateCarree())\ndisplay = pyart.graph.RadarMapDisplay(radar)\ndisplay.plot_ppi_map('velocity',\n                     ax=ax2,\n                     sweep=0,\n                     resolution='50m',\n                     vmin=-17,\n                     vmax=17, \n                     projection=ccrs.PlateCarree(),\n                     cmap='balance')\nplt.show()","visibility":"show","key":"crxgAuBwYj"},{"type":"output","id":"luyGwOQAAQi9BDKz6sa4h","data":[],"visibility":"show","key":"wlh784DVGA"}],"visibility":"show","key":"BORrkSTTIl"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Dealiasing our Velocity","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"uXdzAWq8rF"}],"identifier":"dealiasing-our-velocity","label":"Dealiasing our Velocity","html_id":"dealiasing-our-velocity","implicit":true,"key":"uB5D50iOL6"},{"type":"heading","depth":3,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"An Overview of Aliasing","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"lUBR2ayPnj"}],"identifier":"an-overview-of-aliasing","label":"An Overview of Aliasing","html_id":"an-overview-of-aliasing","implicit":true,"key":"cbhkaNvw8z"}],"key":"cH0P23XE2l"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The radial velocity measured by the radar is mesasured by detecting the phase shift between the transmitted pulse and the pulse recieved by the radar. However, using this methodology, it is only possible to detect phase shifts within ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xfXgFjpID6"},{"type":"inlineMath","value":"\\pm 2\\pi","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>±</mo><mn>2</mn><mi>π</mi></mrow><annotation encoding=\"application/x-tex\">\\pm 2\\pi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.7278em;vertical-align:-0.0833em;\"></span><span class=\"mord\">±</span><span class=\"mord\">2</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span></span></span></span>","key":"lOJJcG6t27"},{"type":"text","value":" due to the periodicity of the transmitted wave. Therefore, for example, a phase shift of ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ldf2Vy9eXN"},{"type":"inlineMath","value":"3\\pi","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mn>3</mn><mi>π</mi></mrow><annotation encoding=\"application/x-tex\">3\\pi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6444em;\"></span><span class=\"mord\">3</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span></span></span></span>","key":"SpMctpNfUy"},{"type":"text","value":" would erroneously be detected as a phase shift of ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KWrMsLHRRL"},{"type":"inlineMath","value":"-\\pi","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"html":"<span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mo>−</mo><mi>π</mi></mrow><annotation encoding=\"application/x-tex\">-\\pi</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6667em;vertical-align:-0.0833em;\"></span><span class=\"mord\">−</span><span class=\"mord mathnormal\" style=\"margin-right:0.03588em;\">π</span></span></span></span>","key":"KNH1e00CCM"},{"type":"text","value":" and give an incorrect value of velocity when retrieved by the radar. This phenomena is called aliasing. The maximium unambious velocity that can be detected by the radar before aliasing occurs is called the Nyquist velocity.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"c7qfdMlcPt"}],"key":"upBSz1gNWQ"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In the next example, you will see an example of aliasing occurring, where the values of +15 m/s abruptly transition into a region of -15 m/s, with -5 m/s in the middle of the region around 37 N, 97 W.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"VhWPwwGD08"}],"key":"CKcZCKYcLA"}],"key":"bv1ik1jVZw"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Calculate Velocity Texture","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ukQYxMdKIa"}],"identifier":"calculate-velocity-texture","label":"Calculate Velocity Texture","html_id":"calculate-velocity-texture","implicit":true,"key":"KHLg2ejTT8"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"First, for dealiasing to work efficiently, we need to use a GateFilter. Notice that, this time, the data shown does not give us a nice gate_id. This is what raw data looks like, and we need to do some preprocessing on the data to remove noise and clutter. Thankfully, Py-ART gives us the capability to do this. As a simple filter in this example, we will first calculate the velocity texture using Py-ART’s ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"JanPD7ByVH"},{"type":"link","url":"https://arm-doe.github.io/pyart/API/generated/pyart.retrieve.calculate_velocity_texture.html","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"inlineCode","value":"calculate_velocity_texture","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"qPjZekrGNs"}],"urlSource":"https://arm-doe.github.io/pyart/API/generated/pyart.retrieve.calculate_velocity_texture.html","key":"OKOOFEIb3i"},{"type":"text","value":" function. The velocity texture is the standard deviation of velocity surrounding a gate. This will be higher in the presence of noise.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"WOrG1wO5oe"}],"key":"ecqqnXz0g0"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Let’s investigate this function first...","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"bfZ9cLR0FH"}],"key":"mUMHQ0Tuau"}],"key":"Uv6MFDEQjy"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"pyart.retrieve.calculate_velocity_texture?","visibility":"show","key":"XNxNIb4XB8"},{"type":"output","id":"UHUp1TL8GxKcVSzIewkaH","data":[],"visibility":"show","key":"AhlvAjNnG3"}],"visibility":"show","key":"pvjngH863k"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Determining the Right Parameters","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"PbmjGDETv1"}],"identifier":"determining-the-right-parameters","label":"Determining the Right Parameters","html_id":"determining-the-right-parameters","implicit":true,"key":"qJC0YfQQEQ"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"You’ll notice that we need:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"H9cJVPrJoP"}],"key":"a6xqE9mvX3"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":3,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"Our radar object","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"wPZkx8ep5C"}],"key":"spJikBMO6r"}],"key":"C9phELp3rt"},{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The name of our velocity field","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"G5DVwwLa7x"}],"key":"hPfn81YZAB"}],"key":"gstNPTNPG4"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The number of gates within our window to use to calculate the texture","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"mKlLZF2nuH"}],"key":"Tlbq4UBkvv"}],"key":"kZ3b2FaYI9"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"text","value":"The nyquist velocity","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"WxU9Ww51Tp"}],"key":"eZClcnhgT7"}],"key":"HIOoMeS3qb"}],"key":"dlEB4T4hvV"},{"type":"paragraph","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"We can retrieve the nyquest velocity from our instrument parameters fortunately - using the following syntax!","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"okiI8BbFcp"}],"key":"XYaExZpWOf"}],"key":"NhcsUO3Xny"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"nyquist_velocity = radar.instrument_parameters[\"nyquist_velocity\"][\"data\"]\nnyquist_velocity","visibility":"show","key":"NECbuwNX5c"},{"type":"output","id":"LHyiPNYWVfwp0Zi-h1vMQ","data":[],"visibility":"show","key":"TnbGXyODMy"}],"visibility":"show","key":"BYQtmIKKnC"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"While the nyquist velocity is stored as an array, we see that these are all the same value...","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"GlIgsVeyRL"}],"key":"AbBJfJRbvX"}],"key":"hNPfOAe10V"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"np.unique(nyquist_velocity)","visibility":"show","key":"agwJD1SkSY"},{"type":"output","id":"U8oNooeLx9f0AinFaJaoz","data":[],"visibility":"show","key":"fFMN0on4za"}],"visibility":"show","key":"gKtdAKsHC5"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Let’s save this single value to a float to use later...","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TyrhOlqWTv"}],"key":"ekQyTSZWbM"}],"key":"Yhpnv1BOWt"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"nyquist_value = np.unique(nyquist_velocity)[0]","visibility":"show","key":"p57pvtXPGy"},{"type":"output","id":"tVZH_2RTEnxRfL4JamUCm","data":[],"visibility":"show","key":"kon8gGDBJY"}],"visibility":"show","key":"q6G3sQKFOv"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Calculate Velocity Texture and Filter our Data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"CrxI5TMAtX"}],"identifier":"calculate-velocity-texture-and-filter-our-data","label":"Calculate Velocity Texture and Filter our Data","html_id":"calculate-velocity-texture-and-filter-our-data","implicit":true,"key":"YX8SoJojY2"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Now that we have an ide?a of which parameters to pass in, let’s calculate velocity texture!","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"TwUjSP1Q7O"}],"key":"Pwu5dy31qr"}],"key":"UbU2VcoGU5"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"vel_texture = pyart.retrieve.calculate_velocity_texture(radar,\n                                                        vel_field='velocity',\n                                                        nyq=nyquist_value)\nvel_texture","visibility":"show","key":"v5tkp6pQxq"},{"type":"output","id":"XfzRPV7IAytjdoJsAs09l","data":[],"visibility":"show","key":"ApJKRvqG2W"}],"visibility":"show","key":"AcqeZHjs6n"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"The ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ujTrgsN0Kj"},{"type":"inlineCode","value":"pyart.retrieve.calculate_velocity_texture","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hwfkwfuJ2g"},{"type":"text","value":" function results in a data dictionary, including the actual data, as well as metadata. We can add this to our ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"FDl3Mx8CeC"},{"type":"inlineCode","value":"radar","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZLsp1mHk9T"},{"type":"text","value":" object, by using the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"xBFKPXtFyV"},{"type":"inlineCode","value":"radar.add_field","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"BpVhyDXSWA"},{"type":"text","value":" method, passing the name of our new field (","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"A0Wr8ze1OZ"},{"type":"inlineCode","value":"\"texture\"","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"KlBC7bkHg0"},{"type":"text","value":"), the data dictionary (","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"TsI2uRmWBt"},{"type":"inlineCode","value":"vel_texture","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IOIOWNruJJ"},{"type":"text","value":"), and a clarification that we want to replace the existing velocity texture field if it already exists in our radar object (","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Zv690qZdyC"},{"type":"inlineCode","value":"replace_existing=True","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"wLAJSBpZ8Z"},{"type":"text","value":")","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"AM1fpfNY94"}],"key":"G98PdeVCV2"}],"key":"wONs1PddJm"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"radar.add_field('texture', vel_texture, replace_existing=True)","visibility":"show","key":"G9x88IqTM8"},{"type":"output","id":"oyJb0RjzspkBHoSBPIdav","data":[],"visibility":"show","key":"NrMiFl33lj"}],"visibility":"show","key":"KxysMLZect"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot our Velocity Texture Field","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"vT203I5Y3i"}],"identifier":"plot-our-velocity-texture-field","label":"Plot our Velocity Texture Field","html_id":"plot-our-velocity-texture-field","implicit":true,"key":"tCxVT8eWF1"}],"key":"ulDr7H6E3T"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now that we have our velocity texture field added to our radar object, let’s plot it!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ERs6kk3Ccd"}],"key":"Tw8Js01VW6"}],"key":"PjFkbloipw"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"fig = plt.figure(figsize=[8, 8])\ndisplay = pyart.graph.RadarMapDisplay(radar)\ndisplay.plot_ppi_map('texture',\n                     sweep=0,\n                     resolution='50m',\n                     vmin=0,\n                     vmax=10, \n                     projection=ccrs.PlateCarree(),\n                     cmap='balance')\nplt.show()","visibility":"show","key":"meIB3Qxidk"},{"type":"output","id":"dZVqvQJy8O5jgmfoapC9_","data":[],"visibility":"show","key":"bX4IlDzoPJ"}],"visibility":"show","key":"FzRNjgUE51"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Determine a Suitable Velocity Texture Threshold","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"EHsRY6BU02"}],"identifier":"determine-a-suitable-velocity-texture-threshold","label":"Determine a Suitable Velocity Texture Threshold","html_id":"determine-a-suitable-velocity-texture-threshold","implicit":true,"key":"BfCDZOU8cS"}],"key":"H06bqixMYd"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot a histogram of velocity texture to get a better idea of what values correspond to hydrometeors and what values of texture correspond to artifacts.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Ja1vsHutmA"}],"key":"KGUY9ArOmh"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"In the below example, a threshold of 3 would eliminate most of the peak corresponding to noise around 6 while preserving most of the values in the peak of ~0.5 corresponding to hydrometeors.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"ARJOtkyuoL"}],"key":"WcoxOXIT1S"}],"key":"yhodRFphmX"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"hist, bins = np.histogram(radar.fields['texture']['data'],\n                          bins=150)\nbins = (bins[1:]+bins[:-1])/2.0\n\nplt.plot(bins,\n         hist,\n         label='Velocity Texture Frequency')\nplt.axvline(3,\n            color='r',\n            label='Proposed Velocity Texture Threshold')\n\nplt.xlabel('Velocity texture')\nplt.ylabel('Count')\nplt.legend()","visibility":"show","key":"uR3GXSL0AO"},{"type":"output","id":"tsSPDTmn8r_7AsLK3FldF","data":[],"visibility":"show","key":"oj6k4W6onU"}],"visibility":"show","key":"WqyRcwxJae"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Setup a Gatefilter Object and Apply our Threshold","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"hqDfsXHp0x"}],"identifier":"setup-a-gatefilter-object-and-apply-our-threshold","label":"Setup a Gatefilter Object and Apply our Threshold","html_id":"setup-a-gatefilter-object-and-apply-our-threshold","implicit":true,"key":"CJxxIPNMyI"}],"key":"j9eHoMgbq1"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now we can set up our GateFilter (","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"tKc5w9uz3t"},{"type":"link","url":"https://arm-doe.github.io/pyart/API/generated/pyart.filters.GateFilter.html#pyart.filters.GateFilter","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"inlineCode","value":"pyart.filters.GateFilter","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"IFYDGtht0e"}],"urlSource":"https://arm-doe.github.io/pyart/API/generated/pyart.filters.GateFilter.html#pyart.filters.GateFilter","key":"U3tPbYo2FW"},{"type":"text","value":"), which allows us to easily apply masks and filters to our radar object.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Jf8e1t2ck2"}],"key":"wPFGHJHhMS"}],"key":"NHiIymrygp"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"gatefilter = pyart.filters.GateFilter(radar)\ngatefilter","visibility":"show","key":"hx2RE6zj5A"},{"type":"output","id":"3iKuQ8XM3cM4E-o96uXR2","data":[],"visibility":"show","key":"trlvZWRF32"}],"visibility":"show","key":"VYrq6bjQ74"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"We discovered that a velocity texture threshold of ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"iG38lATIhJ"},{"type":"strong","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"only including values below 3","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"qUcAI4Iy0F"}],"key":"ykTYxw822N"},{"type":"text","value":" would be suitable for this dataset, we use the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"Am0nfqEW04"},{"type":"inlineCode","value":".exclude_above","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"pRl2JQhb68"},{"type":"text","value":" method, specifying we want to exclude ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"c6swhqbxs3"},{"type":"inlineCode","value":"texture","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mONSp7UjoZ"},{"type":"text","value":" values above 3.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"zHPJo1MpW3"}],"key":"CeMuWEc72W"}],"key":"DZPzmQKMjc"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"gatefilter.exclude_above('texture', 3)","visibility":"show","key":"nQoCOBOnkG"},{"type":"output","id":"97WPF6dWgLAB902JJ25RF","data":[],"visibility":"show","key":"HAwyRDGJkJ"}],"visibility":"show","key":"xfUxogXCRi"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot our Filtered Data","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"V21XhWrjqn"}],"identifier":"plot-our-filtered-data","label":"Plot our Filtered Data","html_id":"plot-our-filtered-data","implicit":true,"key":"TrL6HDf1DN"}],"key":"HNBSkGPqLx"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Now that we have created a gatefilter, filtering our data using the velocity texture, let’s plot our data!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"WtJvdptHL2"}],"key":"iS4wlM0Fft"},{"type":"paragraph","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"children":[{"type":"text","value":"We need to pass our gatefilter to the ","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"BNCLZdfvXh"},{"type":"inlineCode","value":"plot_ppi_map","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"vzkuTJaVD8"},{"type":"text","value":" to apply it to our plot.","position":{"start":{"line":3,"column":1},"end":{"line":3,"column":1}},"key":"IYGtHes1QV"}],"key":"uEWuUQvG73"}],"key":"y0aihfAyUu"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Plot our Unfiltered Data\nfig = plt.figure(figsize=[8, 10])\nax = plt.subplot(211, projection=ccrs.PlateCarree())\ndisplay = pyart.graph.RadarMapDisplay(radar)\ndisplay.plot_ppi_map('velocity',\n                     title='Raw Radial Velocity (no filter)',\n                     ax=ax,\n                     sweep=0,\n                     resolution='50m',\n                     vmin=-17,\n                     vmax=17,\n                     projection=ccrs.PlateCarree(),\n                     colorbar_label='Radial Velocity (m/s)',\n                     cmap='balance')\n\nax2 = plt.subplot(2,1,2,projection=ccrs.PlateCarree())\n\n# Plot our filtered data\ndisplay = pyart.graph.RadarMapDisplay(radar)\ndisplay.plot_ppi_map('velocity',\n                     title='Radial Velocity with Velocity Texture Filter',\n                     ax=ax2,\n                     sweep=0,\n                     resolution='50m',\n                     vmin=-17,\n                     vmax=17, \n                     projection=ccrs.PlateCarree(),\n                     colorbar_label='Radial Velocity (m/s)',\n                     gatefilter=gatefilter,\n                     cmap='balance')\nplt.show()","visibility":"show","key":"ffmSrlkvRQ"},{"type":"output","id":"7lU3m6Co9KEVeMKiLqBrE","data":[],"visibility":"show","key":"MGqRooL7mU"}],"visibility":"show","key":"wUpyXdoIou"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":3,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Dealias the Velocity Using the Region-Based Method","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"dwwBzRVWey"}],"identifier":"dealias-the-velocity-using-the-region-based-method","label":"Dealias the Velocity Using the Region-Based Method","html_id":"dealias-the-velocity-using-the-region-based-method","implicit":true,"key":"KeeWVB0jSy"}],"key":"wHSwhzIiXs"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"At this point, we can use the ","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"HFit70lP1P"},{"type":"link","url":"https://arm-doe.github.io/pyart/API/generated/pyart.correct.dealias_region_based.html","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"inlineCode","value":"dealias_region_based","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"sP1OXbhkZS"}],"urlSource":"https://arm-doe.github.io/pyart/API/generated/pyart.correct.dealias_region_based.html","key":"Yq1zgf9eej"},{"type":"text","value":" to dealias the velocities and then add the new field to the radar!","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"cHKBSSL39m"}],"key":"vgEsdSxKM2"}],"key":"SfA8cgD1oI"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"velocity_dealiased = pyart.correct.dealias_region_based(radar,\n                                                        vel_field='velocity',\n                                                        nyquist_vel=nyquist_value,\n                                                        centered=True,\n                                                        gatefilter=gatefilter)\n\n# Add our data dictionary to the radar object\nradar.add_field('corrected_velocity', velocity_dealiased, replace_existing=True)","visibility":"show","key":"rJBulv7DIK"},{"type":"output","id":"okJCqBKMhBxodFcEN4O_A","data":[],"visibility":"show","key":"OCTqAYHK4c"}],"visibility":"show","key":"hdPDk04Z16"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":4,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot our Cleaned, Dealiased Velocities","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"vJ5WjWTyuA"}],"identifier":"plot-our-cleaned-dealiased-velocities","label":"Plot our Cleaned, Dealiased Velocities","html_id":"plot-our-cleaned-dealiased-velocities","implicit":true,"key":"h8vkAj85XB"}],"key":"p2uoRLlVCz"},{"type":"block","kind":"notebook-content","children":[{"type":"paragraph","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Plot the new velocities, which now look much more realistic.","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"ZNRbyC3g6h"}],"key":"Wdl7t1dejX"}],"key":"nUVfNHbPhZ"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"fig = plt.figure(figsize=[8, 8])\ndisplay = pyart.graph.RadarMapDisplay(radar)\ndisplay.plot_ppi_map('corrected_velocity',\n                     sweep=0,\n                     resolution='50m',\n                     vmin=-30,\n                     vmax=30, \n                     projection=ccrs.PlateCarree(),\n                     colorbar_label='Radial Velocity (m/s)',\n                     cmap='balance',\n                     gatefilter=gatefilter)\nplt.show()","visibility":"show","key":"tK8ESgsbWx"},{"type":"output","id":"C4ioiqHJTUNt80KUl888S","data":[],"visibility":"show","key":"BNNar6DchP"}],"visibility":"show","key":"nOlHbtZr1I"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Compare our Raw Velocity Field to our Dealiased, Cleaned Velocity Field","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"jfb2fn9QYK"}],"identifier":"compare-our-raw-velocity-field-to-our-dealiased-cleaned-velocity-field","label":"Compare our Raw Velocity Field to our Dealiased, Cleaned Velocity Field","html_id":"compare-our-raw-velocity-field-to-our-dealiased-cleaned-velocity-field","implicit":true,"key":"bju4gFnX8H"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"As a last comparison, let’s compare our raw, uncorrected velocities with our cleaned velocities, after applying the velocity texture threshold and dealiasing algorithm","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"f6Ky0ehYeX"}],"key":"leDtSNZgrt"}],"key":"fd0dLGXVWe"},{"type":"block","kind":"notebook-code","data":{"tags":[]},"children":[{"type":"code","lang":"python","executable":true,"value":"# Plot our Unfiltered Data\nfig = plt.figure(figsize=[8, 10])\nax = plt.subplot(211, projection=ccrs.PlateCarree())\ndisplay = pyart.graph.RadarMapDisplay(radar)\ndisplay.plot_ppi_map('velocity',\n                     title='Raw Radial Velocity (no filter)',\n                     ax=ax,\n                     sweep=0,\n                     resolution='50m',\n                     vmin=-30,\n                     vmax=30,\n                     projection=ccrs.PlateCarree(),\n                     colorbar_label='Radial Velocity (m/s)',\n                     cmap='balance')\n\nax2 = plt.subplot(2,1,2,projection=ccrs.PlateCarree())\n\n# Plot our filtered, dealiased data\ndisplay = pyart.graph.RadarMapDisplay(radar)\ndisplay.plot_ppi_map('corrected_velocity',\n                     title='Radial Velocity with Velocity Texture Filter and Dealiasing',\n                     ax=ax2,\n                     sweep=0,\n                     resolution='50m',\n                     vmin=-30,\n                     vmax=30, \n                     projection=ccrs.PlateCarree(),\n                     gatefilter=gatefilter,\n                     colorbar_label='Radial Velocity (m/s)',\n                     cmap='balance')\nplt.show()","visibility":"show","key":"KZfPCPZY8c"},{"type":"output","id":"_zaSXOMAj1kLyDQGpSRlr","data":[],"visibility":"show","key":"SkLr3zZcWB"}],"visibility":"show","key":"mquYWr4gvS"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Conclusions","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"mPYSmJrt5s"}],"identifier":"conclusions","label":"Conclusions","html_id":"conclusions","implicit":true,"key":"KJvSTG5V4O"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Within this lesson, we walked through how to apply radial velocity corrections to a dataset, filtering based on the velocity texture and using a regional dealiasing algorithm.","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"YpETPg2NDq"}],"key":"cR5qEjHeuU"},{"type":"heading","depth":3,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"What’s Next","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"DEjjWdsMEn"}],"identifier":"whats-next","label":"What’s Next","html_id":"whats-next","implicit":true,"key":"d5dFaGIcJJ"},{"type":"paragraph","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"In the next few notebooks, we walk through retrieval development and advanced visualization methods!","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"DZNds7tvBw"}],"key":"p6G9ARjr6J"}],"key":"keCZ3W5dQz"},{"type":"block","kind":"notebook-content","children":[{"type":"heading","depth":2,"position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"children":[{"type":"text","value":"Resources and References","position":{"start":{"line":1,"column":1},"end":{"line":1,"column":1}},"key":"JmzvWQFPov"}],"identifier":"resources-and-references","label":"Resources and References","html_id":"resources-and-references","implicit":true,"key":"f2nKB2dFNi"},{"type":"paragraph","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"children":[{"type":"text","value":"Py-ART essentials links:","position":{"start":{"line":2,"column":1},"end":{"line":2,"column":1}},"key":"CZaog4Lw9I"}],"key":"UAYhUqIgHA"},{"type":"list","ordered":false,"spread":false,"position":{"start":{"line":4,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"listItem","spread":true,"position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"arm-doe.github.io/pyart/","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"children":[{"type":"text","value":"Landing page","position":{"start":{"line":4,"column":1},"end":{"line":4,"column":1}},"key":"gNq3RcQAD6"}],"urlSource":"arm-doe.github.io/pyart/","key":"xF4dIeAgfa"}],"key":"TKwjmWWZzW"}],"key":"zXbmtUIqaZ"},{"type":"listItem","spread":true,"position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"https://arm-doe.github.io/pyart/examples/index.html","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"children":[{"type":"text","value":"Examples","position":{"start":{"line":5,"column":1},"end":{"line":5,"column":1}},"key":"vZNW4VSDpn"}],"urlSource":"https://arm-doe.github.io/pyart/examples/index.html","key":"znXfWJms5G"}],"key":"S4t9oNMqcX"}],"key":"vybpGv37IP"},{"type":"listItem","spread":true,"position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"github.com/ARM-DOE/pyart","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"children":[{"type":"text","value":"Source Code","position":{"start":{"line":6,"column":1},"end":{"line":6,"column":1}},"key":"caaezEc8sb"}],"urlSource":"github.com/ARM-DOE/pyart","error":true,"key":"n1wftdNR1w"}],"key":"SgyaghSOGM"}],"key":"MoipMaCWNs"},{"type":"listItem","spread":true,"position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"groups.google.com/group/pyart-users/","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"children":[{"type":"text","value":"Mailing list","position":{"start":{"line":7,"column":1},"end":{"line":7,"column":1}},"key":"xtOctbNFWx"}],"urlSource":"groups.google.com/group/pyart-users/","key":"I5aLEyuT4C"}],"key":"xEOsg86iky"}],"key":"tTCMuiWK8j"},{"type":"listItem","spread":true,"position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"paragraph","children":[{"type":"link","url":"github.com/ARM-DOE/pyart/issues","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"children":[{"type":"text","value":"Issue Tracker","position":{"start":{"line":8,"column":1},"end":{"line":8,"column":1}},"key":"GzZPq9tRSB"}],"urlSource":"github.com/ARM-DOE/pyart/issues","error":true,"key":"bSJLRRtNx2"}],"key":"eTFrHTf7Mt"}],"key":"c0X6rawDil"}],"key":"sGbZI7QqIX"}],"key":"b1x5boCo5Z"}],"key":"ER254Xk6yM"},"references":{"cite":{"order":[],"data":{}}},"footer":{"navigation":{"prev":{"title":"Introduction to Radar Meteorology with ARM","url":"/foundations/pyart/radars-with-arm","group":"Radar Data with Py-ART"},"next":{"title":"Quantitative Precipitation Estimate (QPE) Analysis with Py-ART","url":"/foundations/pyart/pyart-qpe","group":"Radar Data with Py-ART"}}},"domain":"http://localhost:3000"}